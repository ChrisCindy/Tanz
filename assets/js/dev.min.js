function loadJS(A,e,t){var o=!!window.ActiveXObject,i=o&&!window.XMLHttpRequest,a=document.createElement("script"),n=i?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,e&&e())}:a.onload=function(){e&&e()},a.src=A,t?document.getElementById(t).appendChild(a):n.insertBefore(a,n.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var A=$(window),e={top:A.scrollTop(),left:A.scrollLeft()};e.right=e.left+A.width(),e.bottom=e.top+A.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}});var General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var A=window,e=(A.document,navigator.userAgent.toLowerCase()),t=A.navigator.appVersion.match(/android/gi);A.navigator.appVersion.match(/iphone/gi);"micromessenger"===e.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos(),General.arrowEvent()},updateImageWidth:function(){function A(){var A=$(this),e=t.outerWidth(),o=this.naturalWidth;o>=e?A.addClass("full-img"):A.removeClass("full-img")}function e(){o.each(A)}var t=$(".post-content"),o=$(".single-post-inner img").on("load",A);e()},webFontLoader:function(){WebFontConfig={loading:function(){console.log("loading font")},custom:{families:["Exo","iconfont"],urls:[General.absUrl+"/assets/css/font.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Exo","iconfont"]}})})},arrowEvent:function(){var A=document.getElementById("header"),e=A.clientHeight;$(".arrow_down").click(function(){return $("html,body").animate({scrollTop:e},600,function(){window.location.hash="#"}),!1})},scrollToPos:function(A){var e="我要飞到最高",t=(A||$(window).height(),$('<a href="#" id="to-top" title="'+e+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(A){A.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(A){var e,t,o="iconfont",i={twitter:o+"-twitter",qzone:o+"-qzone",weibo:o+"-weibo",facebook:o+"-facebook",github:o+"-github",douban:o+"-douban",google:o+"-google",dribble:o+"-dribble",v2ex:o+"-v2ex",zhihu:o+"-zhihu",wikipedia:o+"-wikipedia",jianshu:o+"-jianshu",youku:o+"-youku",youtube:o+"-youtube"};for(var a in i)if("function"!=typeof i[a]){var n=a;A.indexOf(n)>=0&&(e=n,t=i[n])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(A){var e=$(this).attr("href"),t=document.createElement("a");t.href=e,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),console.log(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var o=$(this).find("i").css("color"),i=$(this).css("color");$(this).hover(function(){$(this).css("color",o),$(this).addClass("animated pulse")},function(){$(this).css("color",i),$(this).removeClass("animated pulse")})})},rewardLoader:function(){General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){console.log("悬浮"),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(A,e){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="};console.log("支持Webp哦");var o=new Image;o.onload=function(){o.width>0&&o.height>0;console.log("支持Webp"),ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},o.onerror=function(){console.log("不支持Webp"),ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},o.src="data:image/webp;base64,"+t.demo},imgLoader:function(){console.log("加载默认图片")},webPLoader:function(){if(console.log("加载webP"),ImageSmartLoader.isWebPSupported===!0){if(console.log("宽度是"+General.viewWidth),768===General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768===General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var A=$(window);$.fn.lazyload=function(e){function t(){var A=0;i.each(function(){var e=$(this);if(!a.skip_invisible||e.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++A>a.failure_limit)return!1}else e.trigger("appear"),A=0})}var o,i=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,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",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),$.extend(a,e)),o=void 0===a.container||a.container===window?A:$(a.container),0===a.event.indexOf("scroll")&&o.bind(a.event,function(){return t()}),this.each(function(){var A=this,e=$(A);A.loaded=!1,void 0!==e.attr("src")&&e.attr("src")!==!1||e.is("img")&&(e.attr("src",a.placeholder),e.addClass("loading")),e.one("appear",function(){if(!this.loaded){if(a.appear){var t=i.length;a.appear.call(A,t,a)}var o=e.attr("data-"+a.data_attribute);(o.indexOf("upaiyun")>-1||o.indexOf("file.is26.com")>-1)&&(a.advanced_load===!0&&(o+="!"),a.is_scale===!0&&(o+="/fw/"+a.scale_width),a.webP_load===!0&&(o+="/format/webp")),$("<img />").bind("load",function(){e.hide(),e.is("img")?e.attr("src",o):e.css("background-image","url('"+o+"')"),e[a.effect](a.effect_speed),A.loaded=!0;var t=$.grep(i,function(A){return!A.loaded});if(i=$(t),a.load){var n=i.length;a.load.call(A,n,a)}e.removeClass("loading")}).attr("src",o)}}),0!==a.event.indexOf("scroll")&&e.bind(a.event,function(){A.loaded||e.trigger("appear")})}),A.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&A.bind("pageshow",function(A){A.originalEvent&&A.originalEvent.persisted&&i.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(e,t){var o;return o=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:A.height())+A.scrollTop():$(t.container).offset().top+$(t.container).height(),o<=$(e).offset().top-t.threshold},$.rightoffold=function(e,t){var o;return o=void 0===t.container||t.container===window?A.width()+A.scrollLeft():$(t.container).offset().left+$(t.container).width(),o<=$(e).offset().left-t.threshold},$.abovethetop=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollTop():$(t.container).offset().top,o>=$(e).offset().top+t.threshold+$(e).height()},$.leftofbegin=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollLeft():$(t.container).offset().left,o>=$(e).offset().left+t.threshold+$(e).width()},$.inviewport=function(A,e){return!($.rightoffold(A,e)||$.leftofbegin(A,e)||$.belowthefold(A,e)||$.abovethetop(A,e))},$.extend($.expr[":"],{"below-the-fold":function(A){return $.belowthefold(A,{threshold:0})},"above-the-top":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-screen":function(A){return $.rightoffold(A,{threshold:0})},"left-of-screen":function(A){return!$.rightoffold(A,{threshold:0})},"in-viewport":function(A){return $.inviewport(A,{threshold:0})},"above-the-fold":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-fold":function(A){return $.rightoffold(A,{threshold:0})},"left-of-fold":function(A){return!$.rightoffold(A,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&General.addIcons()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiQiLCJmbiIsImV4dGVuZCIsImlzT25TY3JlZW5WaXNpYmxlIiwiaGFzQ2xhc3MiLCJ3aW4iLCJ2aWV3cG9ydCIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImhlaWdodCIsImJvdW5kcyIsInRoaXMiLCJvZmZzZXQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJHZW5lcmFsIiwiaXNNb2JpbGUiLCJpc1dlY2hhdCIsInZpZXdXaWR0aCIsImFic1VybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiaW5pdCIsIlVBIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpc0FuZHJvaWQiLCJhcHBWZXJzaW9uIiwibWF0Y2giLCJhZGRDbGFzcyIsInVwZGF0ZUltYWdlV2lkdGgiLCJyZXdhcmRMb2FkZXIiLCJ3ZWJGb250TG9hZGVyIiwic2Nyb2xsVG9Qb3MiLCJhcnJvd0V2ZW50IiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY29uc29sZSIsImxvZyIsImN1c3RvbSIsImZhbWlsaWVzIiwidXJscyIsIldlYkZvbnQiLCJsb2FkIiwiaGVhZGVyIiwiaGVhZGVySGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiY2xpY2siLCJhbmltYXRlIiwiaGFzaCIsInBvc2l0aW9uIiwiU1RSX1RPX1RPUCIsImJ1dHRvbiIsImFwcGVuZFRvIiwic2Nyb2xsIiwiZmFkZUluIiwiZmFkZU91dCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybEljb25saXplIiwiZG9tYWluIiwiX291dHB1dCIsImljb25Gb250VGFnIiwiaWNvbk1hcCIsInR3aXR0ZXIiLCJxem9uZSIsIndlaWJvIiwiZmFjZWJvb2siLCJnaXRodWIiLCJkb3ViYW4iLCJnb29nbGUiLCJkcmliYmxlIiwidjJleCIsInpoaWh1Iiwid2lraXBlZGlhIiwiamlhbnNodSIsInlvdWt1IiwieW91dHViZSIsIm5hbWUiLCJNYXBLZXkiLCJpbmRleE9mIiwiYWRkSWNvbnMiLCJpIiwiX3NyYyIsImF0dHIiLCJ0bXAiLCJocmVmIiwiX3NlbGZEb21haW4iLCJob3N0bmFtZSIsInByZXBlbmQiLCJfc2VsZkNvbG9yIiwiZmluZCIsImNzcyIsIl9vcmlnaW5hbENvbG9yIiwiaG92ZXIiLCJodG1sIiwiSW1hZ2VTbWFydExvYWRlciIsImlzV2ViUFN1cHBvcnRlZCIsImlzSW1hZ2VDb21wcmVzc2VkIiwid2ViUENoZWNrIiwiaXNDb21wcmVzc2VkQ2hlY2siLCJmZWF0dXJlIiwiVGVzdEltYWdlcyIsImRlbW8iLCJpbWciLCJJbWFnZSIsIndlYlBMb2FkZXIiLCJvbmVycm9yIiwiaW1nTG9hZGVyIiwibGF6eWxvYWQiLCJhZHZhbmNlZF9sb2FkIiwiZGF0YV9hdHRyaWJ1dGUiLCJ3ZWJQX2xvYWQiLCJpc19zY2FsZSIsInNjYWxlX3dpZHRoIiwicmVhZHkiLCIkd2luZG93Iiwib3B0aW9ucyIsInVwZGF0ZSIsImNvdW50ZXIiLCJlbGVtZW50cyIsInNldHRpbmdzIiwic2tpcF9pbnZpc2libGUiLCJpcyIsImFib3ZldGhldG9wIiwibGVmdG9mYmVnaW4iLCJiZWxvd3RoZWZvbGQiLCJyaWdodG9mZm9sZCIsImZhaWx1cmVfbGltaXQiLCJ0cmlnZ2VyIiwiJGNvbnRhaW5lciIsInRocmVzaG9sZCIsImV2ZW50IiwiZWZmZWN0IiwiY29udGFpbmVyIiwiYXBwZWFyIiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWQiLCJmYWlsdXJlbGltaXQiLCJlZmZlY3RzcGVlZCIsImVmZmVjdF9zcGVlZCIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJvbmUiLCJlbGVtZW50c19sZWZ0IiwibGVuZ3RoIiwiY2FsbCIsInVwZGF0ZWRVcmwiLCJoaWRlIiwidGVtcCIsImdyZXAiLCJlbGVtZW50IiwidGVzdCIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJmb2xkIiwiaW5uZXJIZWlnaHQiLCJpbnZpZXdwb3J0IiwiZXhwciIsImJlbG93LXRoZS1mb2xkIiwiYSIsImFib3ZlLXRoZS10b3AiLCJyaWdodC1vZi1zY3JlZW4iLCJsZWZ0LW9mLXNjcmVlbiIsImluLXZpZXdwb3J0IiwiYWJvdmUtdGhlLWZvbGQiLCJyaWdodC1vZi1mb2xkIiwibGVmdC1vZi1mb2xkIl0sIm1hcHBpbmdzIjoiQUFzQkEsUUFBU0EsUUFBT0MsRUFBS0MsRUFBVUMsR0FDN0IsR0FBSUMsS0FBU0MsT0FBT0MsY0FDbEJDLEVBQVFILElBQVNDLE9BQU9HLGVBQ3hCQyxFQUFTQyxTQUFTQyxjQUFjLFVBQ2hDQyxFQUFPTCxFQUFRRyxTQUFTRyxnQkFBa0JILFNBQVNJLHFCQUFxQixRQUFRLEVBQ2xGTCxHQUFPTSxLQUFPLGtCQUNkTixFQUFPTyxPQUFRLEVBQ1hQLEVBQU9RLFdBQ1RSLEVBQU9TLG1CQUFxQixXQUNBLFdBQXRCVCxFQUFPUSxZQUFpRCxhQUF0QlIsRUFBT1EsYUFDM0NSLEVBQU9TLG1CQUFxQixLQUN4QmhCLEdBQ0ZBLE1BS05PLEVBQU9VLE9BQVMsV0FDVmpCLEdBQ0ZB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R0FBUzlKLFNBRzVFWixFQUFFZ0wsV0FBYSxTQUFVTixFQUFTaEMsR0FFaEMsUUFBUTFJLEVBQUVnSixZQUFZMEIsRUFBU2hDLElBQWMxSSxFQUFFOEksWUFBWTRCLEVBQVNoQyxJQUNqRTFJLEVBQUUrSSxhQUFhMkIsRUFBU2hDLElBQWMxSSxFQUFFNkksWUFBWTZCLEVBQVNoQyxLQU9sRTFJLEVBQUVFLE9BQU9GLEVBQUVpTCxLQUFLLE1BQ2RDLGlCQUFrQixTQUFVQyxHQUMxQixNQUFPbkwsR0FBRStJLGFBQWFvQyxHQUNwQi9CLFVBQVcsS0FHZmdDLGdCQUFpQixTQUFVRCxHQUN6QixPQUFRbkwsRUFBRStJLGFBQWFvQyxHQUNyQi9CLFVBQVcsS0FHZmlDLGtCQUFtQixTQUFVRixHQUMzQixNQUFPbkwsR0FBRWdKLFlBQVltQyxHQUNuQi9CLFVBQVcsS0FHZmtDLGlCQUFrQixTQUFVSCxHQUMxQixPQUFRbkwsRUFBRWdKLFlBQVltQyxHQUNwQi9CLFVBQVcsS0FHZm1DLGNBQWUsU0FBVUosR0FDdkIsTUFBT25MLEdBQUVnTCxXQUFXRyxHQUNsQi9CLFVBQVcsS0FJZm9DLGlCQUFrQixTQUFVTCxHQUMxQixPQUFRbkwsRUFBRStJLGFBQWFvQyxHQUNyQi9CLFVBQVcsS0FHZnFDLGdCQUFpQixTQUFVTixHQUN6QixNQUFPbkwsR0FBRWdKLFlBQVltQyxHQUNuQi9CLFVBQVcsS0FHZnNDLGVBQWdCLFNBQVVQLEdBQ3hCLE9BQVFuTCxFQUFFZ0osWUFBWW1DLEdBQ3BCL0IsVUFBVyxPQUtqQmhJLFFBQVFRLE9BQ1JxRixpQkFBaUJyRixPQUNiNUIsRUFBRSxRQUFRSSxTQUFTLGtCQUNyQmdCLFFBQVE4RSIsImZpbGUiOiJkZXYubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJC5mbi5leHRlbmQoe1xuICBpc09uU2NyZWVuVmlzaWJsZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHdpbiA9ICQod2luZG93KTtcbiAgICB2YXIgdmlld3BvcnQgPSB7XG4gICAgICB0b3A6IHdpbi5zY3JvbGxUb3AoKSxcbiAgICAgIGxlZnQ6IHdpbi5zY3JvbGxMZWZ0KClcbiAgICB9O1xuICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xuICAgIHZpZXdwb3J0LmJvdHRvbSA9IHZpZXdwb3J0LnRvcCArIHdpbi5oZWlnaHQoKTtcblxuICAgIHZhciBib3VuZHMgPSB0aGlzLm9mZnNldCgpO1xuICAgIGJvdW5kcy5yaWdodCA9IGJvdW5kcy5sZWZ0ICsgdGhpcy5vdXRlcldpZHRoKCk7XG4gICAgYm91bmRzLmJvdHRvbSA9IGJvdW5kcy50b3AgKyB0aGlzLm91dGVySGVpZ2h0KCk7XG5cbiAgICByZXR1cm4gKCEodmlld3BvcnQucmlnaHQgPCBib3VuZHMubGVmdCB8fCB2aWV3cG9ydC5sZWZ0ID4gYm91bmRzLnJpZ2h0IHx8IHZpZXdwb3J0LmJvdHRvbSA8IGJvdW5kcy50b3AgfHwgdmlld3BvcnQudG9wID4gYm91bmRzLmJvdHRvbSkpO1xuICB9LFxuXG59KTtcblxuZnVuY3Rpb24gbG9hZEpTKHVybCwgY2FsbGJhY2ssIGVsKSB7XG4gIHZhciBpc0lFID0gISF3aW5kb3cuQWN0aXZlWE9iamVjdCxcbiAgICBpc0lFNiA9IGlzSUUgJiYgIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCxcbiAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLFxuICAgIGhlYWQgPSBpc0lFNiA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbiAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUpIHtcbiAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlID09PSBcImxvYWRlZFwiIHx8IHNjcmlwdC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHNjcmlwdC5zcmMgPSB1cmw7XG4gIGlmIChlbCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICB9IGVsc2Uge1xuICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgaGVhZC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG52YXIgR2VuZXJhbCA9IHtcbiAgaXNNb2JpbGU6IGZhbHNlLFxuICBpc1dlY2hhdDogZmFsc2UsXG4gIHZpZXdXaWR0aDogJCh3aW5kb3cpLndpZHRoKCksXG4gIGFic1VybDogbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdCxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDtcbiAgICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgdmFyIGlzQW5kcm9pZCA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvYW5kcm9pZC9naSk7XG4gICAgdmFyIGlzSVBob25lID0gd2luLm5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9pcGhvbmUvZ2kpO1xuICAgIGlmIChVQS5tYXRjaCgvTWljcm9NZXNzZW5nZXIvaSkgPT09IFwibWljcm9tZXNzZW5nZXJcIikge1xuICAgICAgR2VuZXJhbC5pc1dlY2hhdCA9IHRydWU7XG4gICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3dlY2hhdC13ZWJ2aWV3Jyk7XG4gICAgfVxuICAgIGlmICghIWlzQW5kcm9pZCkge1xuICAgICAgR2VuZXJhbC5pc01vYmlsZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgR2VuZXJhbC51cGRhdGVJbWFnZVdpZHRoKCk7XG4gICAgICBHZW5lcmFsLnJld2FyZExvYWRlcigpO1xuICAgIH1cblxuICAgIEdlbmVyYWwud2ViRm9udExvYWRlcigpO1xuICAgIEdlbmVyYWwuc2Nyb2xsVG9Qb3MoKTtcbiAgICBHZW5lcmFsLmFycm93RXZlbnQoKTtcbiAgfSxcbiAgdXBkYXRlSW1hZ2VXaWR0aDogZnVuY3Rpb24gKCkge1xuICAgIHZhciAkcG9zdENvbnRlbnQgPSAkKFwiLnBvc3QtY29udGVudFwiKTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUltYWdlV2lkdGgoKSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICBjb250ZW50V2lkdGggPSAkcG9zdENvbnRlbnQub3V0ZXJXaWR0aCgpLCAvLyBXaWR0aCBvZiB0aGUgY29udGVudFxuICAgICAgICBpbWFnZVdpZHRoID0gdGhpcy5uYXR1cmFsV2lkdGg7IC8vIE9yaWdpbmFsIGltYWdlIHJlc29sdXRpb25cblxuICAgICAgaWYgKGltYWdlV2lkdGggPj0gY29udGVudFdpZHRoKSB7XG4gICAgICAgICR0aGlzLmFkZENsYXNzKCdmdWxsLWltZycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyICRpbWcgPSAkKFwiLnNpbmdsZS1wb3N0LWlubmVyIGltZ1wiKS5vbignbG9hZCcsIHVwZGF0ZUltYWdlV2lkdGgpO1xuXG4gICAgZnVuY3Rpb24gY2FzcGVyRnVsbEltZygpIHtcbiAgICAgICRpbWcuZWFjaCh1cGRhdGVJbWFnZVdpZHRoKTtcbiAgICB9XG5cbiAgICBjYXNwZXJGdWxsSW1nKCk7XG4gIH0sXG4gIHdlYkZvbnRMb2FkZXI6IGZ1bmN0aW9uICgpIHtcbiAgICBXZWJGb250Q29uZmlnID0ge1xuICAgICAgbG9hZGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZyBmb250Jyk7XG4gICAgICB9LFxuICAgICAgY3VzdG9tOiB7XG4gICAgICAgIGZhbWlsaWVzOiBbJ0V4bycsICdpY29uZm9udCddLFxuICAgICAgICB1cmxzOiBbR2VuZXJhbC5hYnNVcmwgKyAnL2Fzc2V0cy9jc3MvZm9udC5taW4uY3NzJ11cbiAgICAgIH1cbiAgICB9O1xuICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBXZWJGb250LmxvYWQoe1xuICAgICAgICBjdXN0b206IHtcbiAgICAgICAgICBmYW1pbGllczogWydFeG8nLCAnaWNvbmZvbnQnXVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbiAgYXJyb3dFdmVudDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyJyk7XG4gICAgdmFyIGhlYWRlckhlaWdodCA9IGhlYWRlci5jbGllbnRIZWlnaHQ7XG4gICAgJCgnLmFycm93X2Rvd24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgLy8gc2Nyb2xsVG9wOiAkKHdpbmRvdykuaGVpZ2h0KCkgLSAyMFxuICAgICAgICBzY3JvbGxUb3A6IGhlYWRlckhlaWdodFxuICAgICAgfSwgNjAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH0sXG4gIC8v5bmz5ruR5rua5Yqo5Yiw6aG26YOoXG4gIHNjcm9sbFRvUG9zOiBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICB2YXIgU1RSX1RPX1RPUCA9ICfmiJHopoHpo57liLDmnIDpq5gnLFxuICAgICAgY292ZXJIZWlnaHQgPSBwb3NpdGlvbiB8fCAkKHdpbmRvdykuaGVpZ2h0KCk7IC8v6I635b6X5Zu+54mH6auY5bqmXG4gICAgdmFyIGJ1dHRvbiA9ICQoJzxhIGhyZWY9XCIjXCIgaWQ9XCJ0by10b3BcIiB0aXRsZT1cIicgKyBTVFJfVE9fVE9QICsgJ1wiPiA8ZGl2IGNsYXNzPVwidG8tdG9wLXdyYXBcIj48L2Rpdj48L2E+JykuYXBwZW5kVG8oJ2JvZHknKTtcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAkKHdpbmRvdykuaGVpZ2h0KCkpIHtcbiAgICAgICAgYnV0dG9uLmZhZGVJbig1MDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uLmZhZGVPdXQoNTAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGJ1dHRvbi5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogMFxuICAgICAgfSwgNjY2LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG4gIC8q57uZ5paH56ug5Lit55qEdXJs5re75YqgaWNvbmZvbnTmlrnkvr/or4bliKsqL1xuICB1cmxJY29ubGl6ZTogZnVuY3Rpb24gKHVybCkge1xuICAgIHZhciBkb21haW4sXG4gICAgICBfb3V0cHV0O1xuICAgIHZhciBpY29uRm9udFRhZyA9ICdpY29uZm9udCc7XG4gICAgdmFyIGljb25NYXAgPSB7IC8q57Si5byVIOWPr+WcqOi/memHjOa3u+WKoOWMuemFjeinhOWImSovXG4gICAgICAndHdpdHRlcic6IGljb25Gb250VGFnICsgJy10d2l0dGVyJyxcbiAgICAgICdxem9uZSc6IGljb25Gb250VGFnICsgJy1xem9uZScsXG4gICAgICAnd2VpYm8nOiBpY29uRm9udFRhZyArICctd2VpYm8nLFxuICAgICAgJ2ZhY2Vib29rJzogaWNvbkZvbnRUYWcgKyAnLWZhY2Vib29rJyxcbiAgICAgICdnaXRodWInOiBpY29uRm9udFRhZyArICctZ2l0aHViJyxcbiAgICAgICdkb3ViYW4nOiBpY29uRm9udFRhZyArICctZG91YmFuJyxcbiAgICAgICdnb29nbGUnOiBpY29uRm9udFRhZyArICctZ29vZ2xlJyxcbiAgICAgIC8vICdsdW9sZWknOiBpY29uRm9udFRhZyArICctbHVvbGVpJyxcbiAgICAgICdkcmliYmxlJzogaWNvbkZvbnRUYWcgKyAnLWRyaWJibGUnLFxuICAgICAgJ3YyZXgnOiBpY29uRm9udFRhZyArICctdjJleCcsXG4gICAgICAnemhpaHUnOiBpY29uRm9udFRhZyArICctemhpaHUnLFxuICAgICAgJ3dpa2lwZWRpYSc6IGljb25Gb250VGFnICsgJy13aWtpcGVkaWEnLFxuICAgICAgJ2ppYW5zaHUnOiBpY29uRm9udFRhZyArICctamlhbnNodScsXG4gICAgICAneW91a3UnOiBpY29uRm9udFRhZyArICcteW91a3UnLFxuICAgICAgJ3lvdXR1YmUnOiBpY29uRm9udFRhZyArICcteW91dHViZSdcblxuICAgIH07XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIGljb25NYXApIHtcbiAgICAgIGlmICh0eXBlb2YgaWNvbk1hcFtuYW1lXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgTWFwS2V5ID0gbmFtZTtcbiAgICAgICAgaWYgKHVybC5pbmRleE9mKE1hcEtleSkgPj0gMCkge1xuICAgICAgICAgIGRvbWFpbiA9IE1hcEtleTtcbiAgICAgICAgICBfb3V0cHV0ID0gaWNvbk1hcFtNYXBLZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9vdXRwdXQ7XG4gIH0sXG4gIGFkZEljb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgLyrnu5nljZrlrqLmlofnq6DlnLDlnYB1cmzmt7vliqBpY2/or4bliKsqL1xuICAgICQoJy5zaW5nbGUtcG9zdC1pbm5lciAgYTpub3QoOmhhcyhpbWcpKScpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgIHZhciBfc3JjID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICB2YXIgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgdG1wLmhyZWYgPSBfc3JjO1xuICAgICAgX3NlbGZEb21haW4gPSB0bXAuaG9zdG5hbWU7XG4gICAgICBHZW5lcmFsLnVybEljb25saXplKF9zZWxmRG9tYWluKTtcbiAgICAgIGNvbnNvbGUubG9nKF9zZWxmRG9tYWluKTtcbiAgICAgICQodGhpcykucHJlcGVuZCgnPGkgY2xhc3M9XCJpY29uZm9udCAnICsgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbikgKyAnXCI+PC9pPicpO1xuICAgICAgdmFyIF9zZWxmQ29sb3IgPSAkKHRoaXMpLmZpbmQoJ2knKS5jc3MoJ2NvbG9yJyksXG4gICAgICAgIF9vcmlnaW5hbENvbG9yID0gJCh0aGlzKS5jc3MoJ2NvbG9yJyk7XG5cbiAgICAgIC8q6byg5qCH5oKs5rWu5pe2Ki9cbiAgICAgICQodGhpcykuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmNzcygnY29sb3InLCBfc2VsZkNvbG9yKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX29yaWdpbmFsQ29sb3IpO1xuICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgfSk7XG5cbiAgICB9KTtcbiAgfSxcbiAgLy8g5omT6LWPXG4gIHJld2FyZExvYWRlcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBsb2FkUVIgPSB7XG4gICAgICBhbGlwYXk6ICcvYXNzZXRzL2ltYWdlcy9hbGlwYXkuanBnJyxcbiAgICAgIHdlY2hhdDogJy9hc3NldHMvaW1hZ2VzL3dlY2hhdHBheS5qcGcnXG4gICAgfTtcbiAgICB2YXIgbG9hZFFSVXJsO1xuICAgIGlmICghIUdlbmVyYWwuaXNXZWNoYXQpIHtcbiAgICAgICQoJy53ZWNoYXQtY29kZSBiJykuaHRtbCgn6ZW/5oyJ5LiK5pa55LqM57u056CB5omT6LWP5L2c6ICFJyk7XG4gICAgfVxuXG4gICAgJCgnLm1vbmV5LWxpa2UgLnJld2FyZC1idXR0b24nKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zb2xlLmxvZygn5oKs5rWuJyk7XG4gICAgICAvLyAkKCdpbWcud2VjaGF0LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi53ZWNoYXQpO1xuICAgICAgLy8gJCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZUluKCk7XG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAkKCcubW9uZXktY29kZScpLmZhZGVPdXQoKTtcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0sIDgwMCk7XG5cbiAgICAkKCcubW9uZXktbGlrZSAucmV3YXJkLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAvLyAkKHRoaXMpLmZpbmQoJ2ltZy53ZWNoYXQtaW1nJykuYXR0cignc3JjJywgbG9hZFFSLndlY2hhdCk7XG4gICAgICAgIC8vICQodGhpcykuZmluZCgnaW1nLmFsaXBheS1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIuYWxpcGF5KTtcbiAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuXG4gIH1cbn07XG5cblxuXG52YXIgSW1hZ2VTbWFydExvYWRlciA9IHtcbiAgaXNXZWJQU3VwcG9ydGVkOiBmYWxzZSxcbiAgaXNJbWFnZUNvbXByZXNzZWQ6IGZhbHNlLFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgSW1hZ2VTbWFydExvYWRlci53ZWJQQ2hlY2soKTtcbiAgfSxcbiAgaXNDb21wcmVzc2VkQ2hlY2s6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuICB3ZWJQQ2hlY2s6IGZ1bmN0aW9uIChmZWF0dXJlLCBjYWxsYmFjaykge1xuICAgIHZhciBUZXN0SW1hZ2VzID0ge1xuICAgICAgZGVtbzogXCJVa2xHUmtvQUFBQlhSVUpRVmxBNFdBb0FBQUFRQUFBQUFBQUFBQUFBUVV4UVNBc0FBQUFCQnhBUkVZaUkvZ2NBQUFCV1VEZ2dHQUFBQURBQkFKMEJLZ0VBQVFBQkFCd2xwQUFEY0FEKy9nYlFBQT09XCJcbiAgICB9O1xuICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJw5ZOmJyk7XG4gICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gKGltZy53aWR0aCA+IDApICYmIChpbWcuaGVpZ2h0ID4gMCk7XG4gICAgICBjb25zb2xlLmxvZygn5pSv5oyBV2VicCcpO1xuICAgICAgSW1hZ2VTbWFydExvYWRlci5pc1dlYlBTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQTG9hZGVyKCk7XG4gICAgfTtcbiAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfkuI3mlK/mjIFXZWJwJyk7XG4gICAgICBJbWFnZVNtYXJ0TG9hZGVyLmlzV2ViUFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgSW1hZ2VTbWFydExvYWRlci53ZWJQTG9hZGVyKCk7XG4gICAgfTtcbiAgICBpbWcuc3JjID0gXCJkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFwiICsgVGVzdEltYWdlcy5kZW1vO1xuXG4gIH0sXG4gIGltZ0xvYWRlcjogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCfliqDovb3pu5jorqTlm77niYcnKTtcbiAgfSxcbiAgd2ViUExvYWRlcjogZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCfliqDovb13ZWJQJyk7XG4gICAgaWYgKEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID09PSB0cnVlKSB7XG4gICAgICBjb25zb2xlLmxvZygn5a695bqm5pivJyArIEdlbmVyYWwudmlld1dpZHRoKTtcbiAgICAgIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA9PT0gNzY4KSB7XG4gICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoIDwgNzY4KSB7XG4gICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoID09PSA3NjgpIHtcbiAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgIHNjYWxlX3dpZHRoOiAxNTAwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICB9LFxuXG5cbn07XG5cblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgdmFyICRjb250YWluZXI7XG4gICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgZmFpbHVyZV9saW1pdDogMCxcbiAgICAgIGV2ZW50OiBcInNjcm9sbFwiLFxuICAgICAgZWZmZWN0OiBcInNob3dcIixcbiAgICAgIGNvbnRhaW5lcjogd2luZG93LFxuICAgICAgZGF0YV9hdHRyaWJ1dGU6IFwib3JpZ2luYWxcIixcbiAgICAgIHNraXBfaW52aXNpYmxlOiBmYWxzZSxcbiAgICAgIGFwcGVhcjogbnVsbCxcbiAgICAgIGxvYWQ6IG51bGwsXG4gICAgICBwbGFjZWhvbGRlcjogXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhiZ0FLQUlBQUFQLy8vLy8vL3lIL0MwNUZWRk5EUVZCRk1pNHdBd0VBQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUFBQ0lJeVBxY3Z0RDZPY3ROcUxzOTY4K3crRzRraVc1b21tNnNxMjdndkg4bFVBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1TSkdjaEJKR2JydmhzQ3pJY0EzM2g3ekhPUS8wQVBnWGNvQkkvSVNnS3dJeWlTVUtRZ1VIaEdyOWlzZHN0OVJRQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQ1d3lVbXJ2VGpyemJ2L1lDaU9aR2xhQm5JUXllbSs4SVVBOUNIRWVFNGVOQjNvd09DRzBEc1VoTWlrSkFIZ0VSVEthRkFRS0VDbDJLeDJ5OTFHQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVQbkRKU2F1OU9Pdk51LzlnS0k1a2FaWUdjaERKNmI3d2hRRDBJY1I0VGg0MEhlakE0SWJRT3hTRXlLUWtBZUFSRk1wb1VCQW9RS1hZckhiTGpVVUFBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwbnBpQkhFU0N2bkE4SVVCOUNIS3VoMGRkQjd1Z0VFUHdIUXJEWkRJQjZCRVV5bWhRRUNoQXBkaXNkc3NOUlFBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbWVuWUVjUklLK2NEd2hRSDBJY3E2SFIxMEh1NkFRUS9BZENzTmtNZ0hvRVJUS2FGQVFLRUNsMkt4MnkrVkVBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVVYREpTYXU5T092TnUvOWdLSTVrdVNURWdSaG1pNkVxNjVZQ1lBUElyQy8xbmUraXdBRXdQQUJkQWFMTmVBUVZiZ0JDMC9SVVNxY2VSWXFZd0pJTTIwUFgyMUVVQWdJeXlZeFd1OS93dUh3YUFRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFVTNESlNhdTlPT3ZOdS85Z0tJNWtXU2JFZ1JqbVppQUhrYlQwS0FBNGdOUVlraDhDbnBBVE9BQ01oMkVsaHdzb241WUNrd0NWRUk3SFFuV3JTQjFuMVVTT29OaHlDNEdnV1JCSWxNM3d1SHhPaDBjQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJRY01sSnE3MDQ2ODI3LzJBb2ptUnBlZ2x4SU1hWXJ1MHB6NWNBM0FBaTJyaE8vN1RBQVRBOGlBTEVteEhJTkJWd0FJTG9tWlEycnlLRmlwZ1FHYmFITG5iOFVSUUNBcElaVFc2NzMvQzRPd0lBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJGVnd5VW1ydlRqcnpidi9ZQ2lPWkdtZVMwSWNpSkVaeUVFa2FHMS9BcUFEU0lic0I4RnRTS3dFRGdEa0liUFRCWXJRWWFGSnlCQ1N5VUowaTFLc2tqUk1Za2RRY004bFJTRWcxQWdDQ1RONlRxL2I3NllJQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUlNjTWxKcTcwNDY4MjcvMkFvam1ScG5sWkNISWhScWF5THpyUW9BRGlBVUhlKzE4QmdKbkFBRkErVWdCR0hGRHFmaFJ5QVFJa3VxYzhzVUxFeUppaUc3dUdyTGM4VWhZREFnbGFiMy9DNGZINktBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWFYREpTYXU5T092TnUvOWdLSTZrbHhBSFlwU3NaaUFIa1ZSdlBMZWNBT3dBZ3Y4VUJPOGdDQTZMUUV6Z0FHQWVra0RlTGtCaDhxaFFTMEZLeU9JSXpXYUJBdDRkeGw2S0F0VzhwVWtKSGtGQmlUUG5iM1VoZ015VEJBRUpkQldBQllOK2lJbUtpNHh2RVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVZM0RKU2F1OU9Pdk51LzlnS0k1azJTWEVnUmdtaDZvczlhNXRqUWxBRGlEMnJlOFVuSTdYS3k0Q0IwRHlZS3dFbERubTVKbFVObnVGSCtFNnlVSzMzU2dBekRVcFVzcEVlV0ZBSDlTVDloSytMaWtLQVVGOWNjOWIrbnA3Z29PRWhZWkZFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWFYREpTYXU5T092TnUvOWdLSTVrYVZvSmNTREdhQ0FIa1ZSdlBKKzRLUUE4Z0l5STNrRkFDZktHdWFRb2NBQTBENk1lTDBCcDlxaktiS2NnSll3SVRtZUJBajZPdGVpTVF1VzhoUkk5Z29JQ2I4clQrSXVpRUNDU0JBRUpjeFdBQllONWlJbUtpNHlMRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVaSERKU2F1OU9Pdk51LzlnS0k1a2FZSUpjU0NHbHE0dDliSm5iVjhDb0FOSWx1Kzl5VThYdkJscmdRTkFlY2dFbHJybTVLbGNIcSttd2c1QXlHaWgzY2xYR2NhYVFRclZNcEV4cUEvc2lac1pQOXM3aWtKQXNNbnZMWDU4ZDRPRWhZYUhaeEVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJHbHd5VW1ydlRqcnpidi9ZQ2lPWkdtV0NYRWdSbVVnQjVHNHNIemVPQ2NBUElCVWlONUJRQW55aHJta1VoSTRBSnlIU284WG9EaDcxYVgyVkpnU0tvVG5zMEFKSDhuYjlFaWhlczRvaVI1QkFSZlAxZmlRb2hBZ1dnUUJDWFFWZ0FXRGVZaUppb3VNTnhFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCSE53eVVtcnZUanJ6YnYvWUNpT3BHYVVxSWtjUkdJbHhJR2NGQ3pUYVlYa1BJVUF3SU9BSWdBQ2Q1T2lFZG1USEpvOUl6QkFDVWlmRTZzUkN5VkFlUVRBUVZ5Z0ZNWmo3NlFnRnF1aHJtOHFZU1FvS0lxWU9DNHg2QUY4Y29JbEFnRUpkeFVLQlFGRGlZdU5nNUdTazVTVmxoUVJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFTQWNNbEpxNzA0NjgyNy8yQW9qbVJaSmNTQkdDYUhxaXhsSUFlUlZITjl0NlVBL0FBRUwrTURDaWtJNEVHQVZES0hvc0FCTUQxQUx3SHF6MG9CL2dLVUtSQjhCUlc4aEhMbHJFMVRDTnBENGEyY3F6MktGSFYzWHhqMEIzd1NDVUFFQ2hTRVU0WjllQVVCVDR3TENvNlFGQUlCQ1ljVmx3V2FrWitnb2FLam9CRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkgxd3lVbXJ2VGpyemJ2L1lDaU9aRWtteElFWW80RWNSR0toS2t2UnE2bDdBdUFEaUJIaWR4QlFlci9nQk9sVDdwNll3QUV3UFl4K3ZnQWxnTFZPdUVTbzJGTEFFa1lFS3JWQUtWUUI1MG01R2gvYkZTbXFUSlQ0RVJRVWVGVjdFZ1o1QUlSMll3b0ZBVVlrQWdFSmdCV01qaGFXajRxYm5KMmVuNkFoRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVnSERKU2F1OU9Pdk51LzlnS0k1a2FXSUpjU0NHbHE0dFpTQUhrVlJ6Zlo5OEtRQkFBQ0x6Q3c0cGlPQkJnRlF5ZTFCUTRBQ2dIaktCS3ZCS0NRSURGR29RSEMxekNsNUNCcTFWVXdqYVErR3RuSnZ2R0lXcXVyc1k5Z2Q5RWdsQkJBb1VoRlNHZUl3V0NnVUJUeG1Qa1JjQ0FRbUhGWmNGbW8yZm9LR2lvNThSQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUi9jTWxKcTcwNDY4MjcvMkFvam1ScGRnbHhJRVpsSUFlUldPbmFValY3N3Z3aUFFQUFvb0lJSGdTVVgzQTRVUUtadmFnb2NBQlVENVVnTUVBSmFMRVRyMUZLQmhXMGhBckJhaTFRQ2xkQWVuSyt6c3Q0alVKbG5lR0NCQW9VZTFkK0VnWjhBSVo1akJZS0JRRklGZ0lCQ1lJVmo1R09rSktObnArZ29hSlNFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWdIREpTYXU5T092TnUvOWdLSTVrYVhZR2NoQ0psUkFIWWxUcDJtWnZQSjk4aVFEQWc0QWlBQUlSbFY5d2VDa2FrYjFvNkdBRUJDaUI2cUZTdFdLeXhxMTAzQ0dFQzVRQ2xVcW9tTmZvaXhyQUp0czFDVHFBb0tBWVlIUTNFM2xBZkJnS2dBZUNkNHhFQVFWOUZRb0ZBVXdWQWdFSmtZZVVsbzJmb0tHaW8yTVJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSOGNNbEpxNzA0NjgyNy8yQW9qbVJwZWdseElFWmxJQWVSV09uYWlqVjc3cHdBL0FCRUJRRThDQ2crb0RDVS9DMTVVRXZnQUtBZUtzQmZnQkxJWGtQZFluUk1LV1FKRlVLMVdpaGJBZWlRMlJvbmp4V3E2b3lTQUJJVUZIaFdleUFHZVFDRWRsRUtCUUZIRmdJQkNZQVZqSTRrbG8rS201eWRucCtLRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVmSERKU2F1OU9Pdk51LzlnS0k1a2FYb0djaENKbFJBSFlsVHAycDdhZStBbkF2d0hBVVh3K3lFcVBxQ1FaeUgrbUtWREVSQ2dCS1k3eXBRS3JWeWZYUkdoZUNoUUNsSXBvVEpPbThNU05DQUwveVRtQUlLQ1lvRE5ieE4zUDNwMUN3cCtoU0FDQVFWN0ZRb0ZBVXNWaXdtT2haQlZpWnVjblo2ZkZoRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkd0d3lVbXJ2VGpyemJ2L1lDaU9aR2wrQ1hFZ1JtVWdCNUZZNmRxZWVLNEpRQThnRllUdklLRHdmRUNkY3JrSUhBRFBROFhYQzFBQ1ZDbHpleXBRQ1JVQ0ZGcWdGS0lBTUhjOVVxaWdNMHJDUjFCUTNORTRlLzlSRkFKRkZnSUJDWFlWZm9COGlvdU1qWTVyRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVhM0RKU2F1OU9Pdk51LzlnS0k1a2FYNEdjaENKbFJBSFltaHZQSjk0YmlGQWZ3Z1VRYStIeUFpSFJaMHlkeGdDQXBTQTg1Q1JEcW5MYklsd0xWQUt6U1loVXdDRXg5cDBLR0VHRUJRVUE4emN3c2liZ0xwNjN4RUVDbkFWQ2dVQlFCcURoWHlLaTR5Tmpuc1JBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFScGNNbEpxNzA0NjgyNy8yQW9qbVJwZ2dseElFWmxJQWVSa09uYW5uZ3BBRHlBVklqZVFTRGE5WDY1WkNod0FEUVBsUjR2SUFwSW9jcHNweUFsVkFoT1owRlVlQUs4Mm5SR29YTE9LSWtlUVNGaVA5L3FmRVZSQ0JBdEFnRUpkQ044Zm5xSWlZcUxqRm9SQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUnJjTWxKcTcwNDY4MjcvMkFvam1ScGdnWnlFSW1WRUFkaW5Oc2J6M1JlSVVCL0NCUkJyNGZRWFlURG90RjRHQUlDbElEenNLeEloOVJxam9BdFVBck5Ka0U3S1FEQ1kvSXBjUVlRRkJRRDdOeFN5NXVBdXRva0NCVGdGUW9GQVVCN0M0S0Vob3FMakkyT0dCRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkZWd3lVbXJ2VGpyemJ2L1lDaU9aR21HQ1hFZ1JtVWdCNUdjZEcwS1FBNGdGYUlmQXB0d3lBa2NBTWREUlpjTEVKL1FTWUZKcUJDUXlFSjBPMVNva0ROS1FrZFFjTTgxUlNFUXRBZ0NDVE42VHEvYjc5c0lBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSUWNNbEpxNzA0NjgyNy8yQW9qbVJwaGdaeUVJbVdydTBwenlFQzNJZVEyYmhPLzhETDRYWUxaSVpFWTNBWkpCQVBoWXdURjJWYVp3bkFrS0RJRkpEY3EvZ2tDQlM2bW5JQ1BXNjczL0Q0TlFJQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRk53eVVtcnZUanJ6YnYvWUNpT1pHbUtDWEVneG1nZ0I1R2NkSTBKUUE0Z0k2SWZBcHZRRmpnQWpJZVJMaGNZT2syRkpXRkVPQjRMejZ4SW9Uck9VRHFDUWt2K0tBcUJJRWtRU0l6TDhMaDhUbjlHQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVVSERKU2F1OU9Pdk51LzlnS0k1a2FZb0djaERKdWFWcjY4NGdBdHlIUUY4MnJ1L0F6T0YyQ3dRcFE2THh5SndRaUlkQ2MvSEVTYWZNQkdCSVVFd0x5UzYyS1FnVXZOaHlBajF1dTkvd09DWUNBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwamdseElNYnB2ckFsQURTQXhIaE9CZ2ZRSDdxZ2NGT29BUWpEcEZLaVVQa1N5NmhRVVFnSXBOaXNkc3NOUmdBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbWVTMEljaUlHK2NDd0pRQTBnY3E2SHdRSDRoNTF3aUNuWUFBU2lVcWxZL1JMTHFGQlJDQWlrMkt4Mnk0VkZBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVBuREpTYXU5T092TnUvOWdLSTVrYVo1YlFoeUlnYjV3TEFsQURTQnlyb2ZCQWZpSG5YQ0lLZGdBQktKU3FWajlFc3VvVUZFSUNLVFlySGJMQlVVQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBucWlVRUFkaXBIQU1DMEFOSUhLdWg4RUIrSWVkY0lncDJBQUVvbEtwWVAwU3k2aFFVUWdJcE5pc2RzdGRSQUFBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJEMXd5VW1ydlRqcnpidi9ZQ2lPWkdtZXFKa1FCMktrY0F3TFFBMGdjcTZId1FINGg1MXdpQ25ZQUFTaVVxbGcvUkxMcUZCUkNBaWsyS3gyaTRvQUFEcz1cIixcbiAgICAgIGFkdmFuY2VkX2xvYWQ6IGZhbHNlLFxuICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgIGlzX3NjYWxlOiBmYWxzZSxcbiAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICBpZiAoc2V0dGluZ3Muc2tpcF9pbnZpc2libGUgJiYgISR0aGlzLmlzKFwiOnZpc2libGVcIikpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQuYWJvdmV0aGV0b3AodGhpcywgc2V0dGluZ3MpIHx8XG4gICAgICAgICAgJC5sZWZ0b2ZiZWdpbih0aGlzLCBzZXR0aW5ncykpIHtcbiAgICAgICAgICAvKiBOb3RoaW5nLiAqL1xuICAgICAgICB9IGVsc2UgaWYgKCEkLmJlbG93dGhlZm9sZCh0aGlzLCBzZXR0aW5ncykgJiZcbiAgICAgICAgICAhJC5yaWdodG9mZm9sZCh0aGlzLCBzZXR0aW5ncykpIHtcbiAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiYXBwZWFyXCIpO1xuICAgICAgICAgIC8qIGlmIHdlIGZvdW5kIGFuIGltYWdlIHdlJ2xsIGxvYWQsIHJlc2V0IHRoZSBjb3VudGVyICovXG4gICAgICAgICAgY291bnRlciA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCsrY291bnRlciA+IHNldHRpbmdzLmZhaWx1cmVfbGltaXQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIC8qIE1haW50YWluIEJDIGZvciBhIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZmFpbHVyZWxpbWl0KSB7XG4gICAgICAgIG9wdGlvbnMuZmFpbHVyZV9saW1pdCA9IG9wdGlvbnMuZmFpbHVyZWxpbWl0O1xuICAgICAgICBkZWxldGUgb3B0aW9ucy5mYWlsdXJlbGltaXQ7XG4gICAgICB9XG4gICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmVmZmVjdHNwZWVkKSB7XG4gICAgICAgIG9wdGlvbnMuZWZmZWN0X3NwZWVkID0gb3B0aW9ucy5lZmZlY3RzcGVlZDtcbiAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XG4gICAgICB9XG5cbiAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKiBDYWNoZSBjb250YWluZXIgYXMgalF1ZXJ5IGFzIG9iamVjdC4gKi9cbiAgICAkY29udGFpbmVyID0gKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykgPyAkd2luZG93IDogJChzZXR0aW5ncy5jb250YWluZXIpO1xuXG4gICAgLyogRmlyZSBvbmUgc2Nyb2xsIGV2ZW50IHBlciBzY3JvbGwuIE5vdCBvbmUgc2Nyb2xsIGV2ZW50IHBlciBpbWFnZS4gKi9cbiAgICBpZiAoMCA9PT0gc2V0dGluZ3MuZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSkge1xuICAgICAgJGNvbnRhaW5lci5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB1cGRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgJHNlbGYgPSAkKHNlbGYpO1xuXG4gICAgICBzZWxmLmxvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAvKiBJZiBubyBzcmMgYXR0cmlidXRlIGdpdmVuIHVzZSBkYXRhOnVyaS4gKi9cbiAgICAgIGlmICgkc2VsZi5hdHRyKFwic3JjXCIpID09PSB1bmRlZmluZWQgfHwgJHNlbGYuYXR0cihcInNyY1wiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XG4gICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCBzZXR0aW5ncy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgJHNlbGYuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIFdoZW4gYXBwZWFyIGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlLiAqL1xuXG4gICAgICAkc2VsZi5vbmUoXCJhcHBlYXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMubG9hZGVkKSB7XG4gICAgICAgICAgaWYgKHNldHRpbmdzLmFwcGVhcikge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzX2xlZnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICBzZXR0aW5ncy5hcHBlYXIuY2FsbChzZWxmLCBlbGVtZW50c19sZWZ0LCBzZXR0aW5ncyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciB1cGRhdGVkVXJsID0gJHNlbGYuYXR0cihcImRhdGEtXCIgKyBzZXR0aW5ncy5kYXRhX2F0dHJpYnV0ZSk7XG4gICAgICAgICAgaWYgKHVwZGF0ZWRVcmwuaW5kZXhPZigndXBhaXl1bicpID4gLTEgfHwgdXBkYXRlZFVybC5pbmRleE9mKCdmaWxlLmlzMjYuY29tJykgPiAtMSkge1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmFkdmFuY2VkX2xvYWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnISc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuaXNfc2NhbGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnL2Z3LycgKyBzZXR0aW5ncy5zY2FsZV93aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy53ZWJQX2xvYWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnL2Zvcm1hdC93ZWJwJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh1cGRhdGVkVXJsKTtcbiAgICAgICAgICAkKFwiPGltZyAvPlwiKVxuICAgICAgICAgICAgLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAkc2VsZi5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XG4gICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIHVwZGF0ZWRVcmwgKyBcIicpXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICRzZWxmW3NldHRpbmdzLmVmZmVjdF0oc2V0dGluZ3MuZWZmZWN0X3NwZWVkKTtcblxuICAgICAgICAgICAgICBzZWxmLmxvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgLyogUmVtb3ZlIGltYWdlIGZyb20gYXJyYXkgc28gaXQgaXMgbm90IGxvb3BlZCBuZXh0IHRpbWUuICovXG4gICAgICAgICAgICAgIHZhciB0ZW1wID0gJC5ncmVwKGVsZW1lbnRzLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhZWxlbWVudC5sb2FkZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBlbGVtZW50cyA9ICQodGVtcCk7XG5cbiAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxvYWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5sb2FkLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICRzZWxmLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXG4gICAgICAvKiBieSB0cmlnZ2VyaW5nIGFwcGVhci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgaWYgKDAgIT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgJHNlbGYuYmluZChzZXR0aW5ncy5ldmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghc2VsZi5sb2FkZWQpIHtcbiAgICAgICAgICAgICRzZWxmLnRyaWdnZXIoXCJhcHBlYXJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qIENoZWNrIGlmIHNvbWV0aGluZyBhcHBlYXJzIHdoZW4gd2luZG93IGlzIHJlc2l6ZWQuICovXG4gICAgJHdpbmRvdy5iaW5kKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHVwZGF0ZSgpO1xuICAgIH0pO1xuXG4gICAgLyogV2l0aCBJT1M1IGZvcmNlIGxvYWRpbmcgaW1hZ2VzIHdoZW4gbmF2aWdhdGluZyB3aXRoIGJhY2sgYnV0dG9uLiAqL1xuICAgIC8qIE5vbiBvcHRpbWFsIHdvcmthcm91bmQuICovXG4gICAgaWYgKCgvKD86aXBob25lfGlwb2R8aXBhZCkuKm9zIDUvZ2kpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pKSB7XG4gICAgICAkd2luZG93LmJpbmQoXCJwYWdlc2hvd1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyogRm9yY2UgaW5pdGlhbCBjaGVjayBpZiBpbWFnZXMgc2hvdWxkIGFwcGVhci4gKi9cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICB1cGRhdGUoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qIENvbnZlbmllbmNlIG1ldGhvZHMgaW4galF1ZXJ5IG5hbWVzcGFjZS4gICAgICAgICAgICovXG4gIC8qIFVzZSBhcyAgJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwge3RocmVzaG9sZCA6IDEwMCwgY29udGFpbmVyIDogd2luZG93fSkgKi9cblxuICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHZhciBmb2xkO1xuXG4gICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICBmb2xkID0gKHdpbmRvdy5pbm5lckhlaWdodCA/IHdpbmRvdy5pbm5lckhlaWdodCA6ICR3aW5kb3cuaGVpZ2h0KCkpICsgJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS50b3AgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikuaGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgLSBzZXR0aW5ncy50aHJlc2hvbGQ7XG4gIH07XG5cbiAgJC5yaWdodG9mZm9sZCA9IGZ1bmN0aW9uIChlbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHZhciBmb2xkO1xuXG4gICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICBmb2xkID0gJHdpbmRvdy53aWR0aCgpICsgJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCArICQoc2V0dGluZ3MuY29udGFpbmVyKS53aWR0aCgpO1xuICAgIH1cblxuICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgfTtcblxuICAkLmFib3ZldGhldG9wID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgdmFyIGZvbGQ7XG5cbiAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcbiAgICAgIGZvbGQgPSAkd2luZG93LnNjcm9sbFRvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9sZCA+PSAkKGVsZW1lbnQpLm9mZnNldCgpLnRvcCArIHNldHRpbmdzLnRocmVzaG9sZCArICQoZWxlbWVudCkuaGVpZ2h0KCk7XG4gIH07XG5cbiAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBzZXR0aW5ncykge1xuICAgIHZhciBmb2xkO1xuXG4gICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdDtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9sZCA+PSAkKGVsZW1lbnQpLm9mZnNldCgpLmxlZnQgKyBzZXR0aW5ncy50aHJlc2hvbGQgKyAkKGVsZW1lbnQpLndpZHRoKCk7XG4gIH07XG5cbiAgJC5pbnZpZXdwb3J0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNldHRpbmdzKSB7XG5cbiAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmxlZnRvZmJlZ2luKGVsZW1lbnQsIHNldHRpbmdzKSAmJlxuICAgICAgISQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5hYm92ZXRoZXRvcChlbGVtZW50LCBzZXR0aW5ncyk7XG4gIH07XG5cbiAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xuICAvKiBVc2UgYXMgJChcImltZzpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSBvciAqL1xuICAvKiAkKFwiaW1nXCIpLmZpbHRlcihcIjpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSB3aGljaCBpcyBmYXN0ZXIgKi9cblxuICAkLmV4dGVuZCgkLmV4cHJbXCI6XCJdLCB7XG4gICAgXCJiZWxvdy10aGUtZm9sZFwiOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFwiYWJvdmUtdGhlLXRvcFwiOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBcInJpZ2h0LW9mLXNjcmVlblwiOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgXCJsZWZ0LW9mLXNjcmVlblwiOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFwiaW4tdmlld3BvcnRcIjogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiAkLmludmlld3BvcnQoYSwge1xuICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLyogTWFpbnRhaW4gQkMgZm9yIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cbiAgICBcImFib3ZlLXRoZS1mb2xkXCI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICB9KTtcbiAgICB9LFxuICAgIFwicmlnaHQtb2YtZm9sZFwiOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgXCJsZWZ0LW9mLWZvbGRcIjogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChhLCB7XG4gICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBHZW5lcmFsLmluaXQoKTtcbiAgSW1hZ2VTbWFydExvYWRlci5pbml0KCk7XG4gIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgIEdlbmVyYWwuYWRkSWNvbnMoKTtcbiAgfVxuXG59KTtcbiJdfQ==
